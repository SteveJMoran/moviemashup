(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){e.exports=n(50)},27:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(20),r=n.n(o),s=(n(27),n(8)),i=n.n(s),l=n(10),u=n(3),m=n(4),d=n(6),h=n(5),v=n(7),p=n(9),f=n.n(p),b=["w92","w154","w185","w342","w500","w780","original"],g="http://image.tmdb.org/t/p/";var k={API_TOKEN:"bbea649d80c6176b8410fdb000160360",API_URL:"https://api.themoviedb.org/3",getPosterUrl:function(e){var t="w780";return b.includes("w780")||(t="w780"),"".concat(g).concat(t).concat(e)},getBackdropUrl:function(e){return"".concat(g).concat("w1280","/").concat(e)}},O=(n(49),n(1)),y=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("header",{className:this.props.containerClass},c.a.createElement("h1",null,"Movie Mashup"),c.a.createElement("p",null,"Pick two movies and Movie Mashup will recomend a movie based on your selections!"),c.a.createElement("a",{className:"start-button",href:"#selectOne",onClick:this.props.scrollToRef},"Start"))}}]),t}(a.Component),M=n(11),j=n(13),E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).changeQuery=function(e){n.handleSelect(e),n.setState({q:e.target.value},function(){n.state.q.length<5?n.autocompleteSearchThrottled(n.state.q):n.autocompleteSearchDebounced(n.state.q)})},n.handleSelect=function(e){var t=e.target,a=t.value,c=t.getAttribute("list"),o=document.querySelectorAll("#"+c+" option");o=Object(M.a)(o);var r,s=null;if((r=o.filter(function(e){return e.value===a&&(s=e),s})).length){var i=r[0].dataset.value;n.fetchSelectedMovie(i),n.fetchRecommendations(i)}},n.autocompleteSearch=function(e){n.fetchMatches(e)},n.fetchMatches=function(e){var t=n.state._searches||[];t.push(e),n.setState({_searches:t}),n.fetchMovies(e)},n.autoCompleteid="autocomplete-"+e.id,n.autocompleteSearchDebounced=Object(j.a)(300,n.autocompleteSearch),n.autocompleteSearchThrottled=Object(j.b)(300,n.autocompleteSearch),n.state={q:"",_searches:null,results:[]},n.fetchSelectedMovie=n.fetchSelectedMovie.bind(Object(O.a)(Object(O.a)(n))),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"fetchMovies",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n="".concat(k.API_URL,"/search/movie"),a={crossDomain:!0,api_key:k.API_TOKEN,query:t,page:1,include_adult:!1},!t.length){e.next=9;break}return e.next=6,f.a.get(n,{params:a});case 6:c=e.sent,o=c.data.results,this.setState({results:o});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}},e,this,[[0,11]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSelectedMovie",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(k.API_URL,"/movie/").concat(t),a={crossDomain:!0,api_key:k.API_TOKEN,include_adult:!1},e.next=5,f.a.get(n,{params:a});case 5:c=e.sent,o=c.data,this.props.setMovieChoice(o),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},{key:"fetchRecommendations",value:function(){var e=Object(l.a)(i.a.mark(function e(t,n){var a,c,o,r,s,l,u,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(k.API_URL,"/movie/").concat(t,"/recommendations"),n=null!==n?n:1,c={crossDomain:!0,api_key:k.API_TOKEN,page:1,include_adult:!1},o={crossDomain:!0,api_key:k.API_TOKEN,page:2,include_adult:!1},e.next=7,f.a.get(a,{params:c});case 7:return r=e.sent,e.next=10,f.a.get(a,{params:o});case 10:s=e.sent,l=r.data.results,u=s.data.results,m=[].concat(Object(M.a)(l),Object(M.a)(u)),this.props.setRecommendations(m),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.error(e.t0.message);case 20:case"end":return e.stop()}},e,this,[[0,17]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"renderBlank",value:function(){return{backgroundImage:"none"}}},{key:"renderBackground",value:function(){var e=this.props.selectedMovie.backdrop_path,t=k.getBackdropUrl(e);return{backgroundImage:"url(".concat(t,")")}}},{key:"renderSearchResults",value:function(){return this.state.results.map(function(e){var t=e.id,n=e.title,a=e.release_date,o=parseInt(a);return c.a.createElement("option",{key:t,"data-value":t,value:"".concat(n," (").concat(o,")")})})}},{key:"render",value:function(){return c.a.createElement("div",{className:this.props.containerClass},c.a.createElement("div",{className:"background",style:null!==this.props.selectedMovie?this.renderBackground():this.renderBlank()}),c.a.createElement("input",{placeholder:this.props.placeholder,type:"text",list:this.autoCompleteid,onChange:this.changeQuery,value:this.state.q}),c.a.createElement("datalist",{className:"movieAutocomplete",id:this.autoCompleteid},this.renderSearchResults()))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e)))._reset=function(e){e.preventDefault(),n.setState({selectedMovieA:null,selectedMovieB:null,recommendationsA:[],recommendationsB:[],recommendedMovie:null}),document.querySelector("header").scrollIntoView()},n.state={selectedMovieA:null,selectedMovieB:null,recommendationsA:[],recommendationsB:[],recommendedMovie:null},n.setMovieChoiceA=n.setMovieChoiceA.bind(Object(O.a)(Object(O.a)(n))),n.setMovieChoiceB=n.setMovieChoiceB.bind(Object(O.a)(Object(O.a)(n))),n.setRecommendationsA=n.setRecommendationsA.bind(Object(O.a)(Object(O.a)(n))),n.setRecommendationsB=n.setRecommendationsB.bind(Object(O.a)(Object(O.a)(n))),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidUpdate",value:function(){this.state.recommendationsA.length&&this.state.recommendationsB.length&&null===this.state.recommendedMovie&&this.recommend()}},{key:"setMovieChoiceA",value:function(e){this.setState({selectedMovieA:e})}},{key:"setMovieChoiceB",value:function(e){this.setState({selectedMovieB:e})}},{key:"setRecommendationsA",value:function(e){this.setState({recommendationsA:e})}},{key:"setRecommendationsB",value:function(e){this.setState({recommendationsB:e})}},{key:"loadingRecommendation",value:function(){return c.a.createElement("div",{className:"loading-recommendation"},"Loading")}},{key:"getSharedReccomendations",value:function(e,t){var n=[];return e.forEach(function(e){return t.forEach(function(t){JSON.stringify(e)===JSON.stringify(t)&&n.push(e)})}),n.length||(n.push(e[0]),n.push(t[0])),n}},{key:"recommend",value:function(){console.log("analyzing..");var e=this.state,t=e.recommendationsA,n=e.recommendationsB,a=this.getSharedReccomendations(t,n);this.setState({recommendedMovie:a[0]})}},{key:"renderRecommendation",value:function(){document.getElementById("recommendation").scrollIntoView();var e=this.state.recommendedMovie,t=k.getPosterUrl(e.poster_path);return c.a.createElement("div",{className:"result"},c.a.createElement("h3",null,"You should watch:"),c.a.createElement("img",{src:t,alt:e.title}),c.a.createElement("h2",null,e.title),c.a.createElement("p",null,e.overview))}},{key:"render",value:function(){var e=this;return c.a.createElement("form",null,c.a.createElement("div",{className:"panel"},c.a.createElement(y,{containerClass:"container"})),c.a.createElement("div",{className:"panel panel-half",id:"selectOne"},c.a.createElement(E,{id:1,placeholder:"Pick a Movie",setMovieChoice:this.setMovieChoiceA,setRecommendations:this.setRecommendationsA,selectedMovie:this.state.selectedMovieA,containerClass:"moviePicker container container-red"})),c.a.createElement("div",{className:"panel panel-half"},c.a.createElement(E,{id:2,placeholder:"Pick another Movie",setMovieChoice:this.setMovieChoiceB,setRecommendations:this.setRecommendationsB,selectedMovie:this.state.selectedMovieB,containerClass:"moviePicker container container-cyan"})),c.a.createElement("div",{className:"panel",id:"recommendation"},c.a.createElement("div",{className:"container"},null!==this.state.recommendedMovie?this.renderRecommendation():this.loadingRecommendation(),c.a.createElement("div",{className:"reset-container"},c.a.createElement("button",{type:"button",className:"reset-button",onClick:function(t){e._reset(t)}},"Reset")))))}}]),t}(a.Component),S=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return c.a.createElement("footer",null,c.a.createElement("p",null,"\xa9 Steven Moran 2019"))}}]),t}(a.Component),A=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"getConfig",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(k.API_URL,"/configuration"),n={crossDomain:!0,api_key:k.API_TOKEN},e.next=5,f.a.get(t,{params:n});case 5:a=e.sent,console.log(a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(w,null),c.a.createElement(S,null))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.34a27da6.chunk.js.map